<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
       xmlns:p="http://primefaces.org/ui"> 

<h:head>
		<title>SSAC</title>
		
			
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
		<meta name="keywords" content="" />
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/jquery.scrolly.min.js"></script>
		<script src="js/jquery.onvisible.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
	
    
			
			<link rel="stylesheet" href="css/style-desktop.css" />
			<link rel="stylesheet" href="css/style-noscript.css" />
    <script>
		  //alert(window.localStorage.getItem("IdCatastrofe"));
		  var css = window.localStorage.getItem("urlCSS");
		  var cssFinal = "css/"+ css; 
		  //alert("Css final: "+cssFinal);
		  //alert(window.localStorage.getItem("urlCSS"));
		  //document.getElementById("j_idt5:catastrofeId").value = id;
		  function cambiarCSS() { 
				$("#cssPrincipal").attr("href",cssFinal);
				//alert("cambie el css");
				return false;
		  }
		  cambiarCSS();
			function obtenerNombre(){
				HttpServletRequest req = (HttpServletRequest) request;
				String urlStr = req.getRequestURL().toString().toLowerCase();
				
				alert(urlStr);
				}
	</script>	
<script type="text/javascript" language="javascript">
			function show(id) {
				var oc = document.getElementById(id).style;
				hide();
				oc.display = "block";
			}
			function hide() {
				document.getElementById('banner').style.display = "none";
				document.getElementById('donacion').style.display = "none";
				document.getElementById('busperdesap').style.display = "none";
				document.getElementById('personasdesap').style.display = "none";
				document.getElementById('registrousuario').style.display = "none";
				document.getElementById('loginusuario').style.display = "none";
				document.getElementById('home').style.display = "none";
				
			}
</script>

 	<style>
    *{ margin: 0; padding: 0; }
    html, body, #map{
        width: 100%;
        height: 100%;
    }
    </style>
  	
  	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language=es"></script>	
	
		<style type="text/css">
			.oculto {
				display: none;
			}
			span {
				
				font-size: 20px;
			}
			div {
				
				font-size: 20px;
				
			}
		</style>
<style>
			#map-canvas {
		   display: block;
		   width: 100%;
		   height: 900px;
			}
		
		     #map-canvas{
		        height: 850px;
				width:100%;
		        margin: 0px;
		        padding: 0px
		      }
    </style>
    
    
   <!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</h:head>
	<body class="homepage">
		<!-- Header -->
			<div id="header">
				<!-- Inner -->
					<div class="inner">
						<div id="header">
			
			
						
						
							<p:graphicImage value="imagen/#{logoCatastrofeUsuario}" width="100" height="100" /> 
            				<h:outputText value="" style="border: transparent;"/>	   
            
							<h1><a href="Index.xhtml" id="logo">#{nombreCatastrofeUsuario}</a></h1>
									    
								#{filtroUrl.id}
										        
            
            				 <p><u> Descripción: </u></p>
            				<p>#{descripcionCatastrofeUsuario}	</p> 
            				<br/>  
            				<u> Imágenes: </u> 
            				<br/>  
							<p>	
							<p:contentFlow value="#{imagesView.imagesMostrar}" var="image">
							    <p:graphicImage value="imagen/#{image}" styleClass="content" />
							     
							    <div class="caption"></div>
							</p:contentFlow>           		         	        	
							</p>
							<u> ONGS: </u> 
							<br/>
							
						    <p:accordionPanel  value="#{listarOngUsuarioBean.listaOngBean}" var="ongUsuario">
						        <p:tab title= "#{ongUsuario.nombre}">
						        <p:graphicImage value="imagen/#{ongUsuario.imagen}" width="100" height="100"/>
						            <h:panelGrid columns="2" cellpadding="10">
						                
						                
						                <p>
						                <h:outputText  value="Descripción:#{ongUsuario.descripcion}" />
						                </p>
						                <p>
						                <h:outputText  value="Dirección:#{ongUsuario.direccion}" />
						                </p>
						                <p>
						                <h:outputText  value="Teléfono:#{ongUsuario.telefono}" />
						                </p>
						                
						            </h:panelGrid>
						            
						                <a href="#{ongUsuario.citioWeb}"> 
						                
						                #{ongUsuario.citioWeb} 
						                
						                </a>
						        </p:tab>
						    
						    </p:accordionPanel>
							
							<br/>
							<p><u> Mapa Zona Afectada </u></p>
							
							
							<p:gmap id="map" center="#{imagesView.latitud}, #{imagesView.longitud}" zoom="10" type="HYBRID"  style="width:1350px;height:500px"
    						 model="#{imagesView.polygonModel}" widgetVar="map" >    
    						<p:ajax event="overlaySelect" oncomplete="PF('dlg').show();" update="growl" />	    	
    						</p:gmap>  
							
							
							<u>Plan de Riesgo:</u>
							<br/>
							<object type="application/pdf" data="imagen/#{imagesView.pdfCatastrofe}?pfdrid_c=true" height="300px" width="100%">
           					
        					</object>
							
							<hr />		
							
							<p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">
    <p:graphicImage name="/demo/images/ajaxloadingbar.gif" />
</p:dialog>
 
<h:form>
    <p:commandButton value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthick-1-s">
        <p:fileDownload value="#{fileDownloadView.file}" />
    </p:commandButton>
</h:form>
 
<script type="text/javascript">
function start() {
    PF('statusDialog').show();
}
 
function stop() {
    PF('statusDialog').hide();
}
</script>
							
							
						</div>
						<div class="footer">
							<a href="#banner" class="button circled scrolly">¡AYUDA!</a>
						
						</div>
					</div>
				
				<!-- Nav -->
					<div id="nav">
						<ul>
							
							<!--  	<a id="displayText"  href="#banner" onclick="toggle();">SOLICITAR AYUDA</a></li>-->
								<li><a href="#home" style="cursor: hand; text-decoration: none" onclick="show('home');">Catastrofe</a></li>
								<li><a href="#banner" style="cursor: hand; text-decoration: none" onclick="show('banner');"> Pedido de ayuda</a></li>
								<li><a href="#donacion" style="cursor: hand; text-decoration: none" onclick="show('donacion');">Donaciones</a></li>
								<li><a href="#busperdesap" style="cursor: hand; text-decoration: none" onclick="show('busperdesap');">Buscar Personas desaparecidas</a></li>
								<li><a href="#personasdesap" style="cursor: hand; text-decoration: none" onclick="show('personasdesap');">Alta personas desaparecidas</a></li>
								<li><a href="#registrousuario" style="cursor: hand; text-decoration: none" onclick="show('registrousuario');">Registro usuario</a></li>
								<li><a href="#loginusuario" style="cursor: hand; text-decoration: none" onclick="show('loginusuario');">Login</a></li>
														
						</ul>
					</div>
				</div>
				
				<!-- home -->
			<div class="oculto" id="home">
			<div class="section">
			
			
					<h2> <strong>Descripción de la catàstrofe : #{nombreCatastrofeUsuario} </strong></h2>
					<strong></strong>
					<p>	
						 <strong>#{descripcionCatastrofeUsuario}	</strong> 
					</p>	
					
						 <strong>imagenes :</strong>
						 <p>
						 <p:graphicImage name="imagen/#{logoCatastrofeUsuario}" />
						<p:galleria value="#{imagesView.imagesMostrar}" var="image" panelWidth="500" panelHeight="313" showCaption="true">
    <p:graphicImage name="imagen/#{logoCatastrofeUsuario}"  title="#{image}"/>
</p:galleria>
					</p>
					#{cssCatastrofeUsuario}
		#{idCatastrofeUsuario}
		
					
	<div class="ui-grid ui-grid-responsive">
    <div class="ui-grid-row">
     <div class="ui-grid-col-1"></div>
        <div class="ui-grid-col-5">
        <f:view>
		
		</f:view>
        
        </div>
        <div class="ui-grid-col-1"></div>
        <div class="ui-grid-col-5"> 
        <br/>
        	
        </div>
        <div class="ui-grid-col-1"></div>
    </div>
</div>
</div>
	</div>
				
				
				
				
				
			<!-- Banner -->

		<div class="oculto" id="banner">
		<div class="section">
			
					<h2> <strong>¡SOLICITE AYUDA!</strong></h2>
					
						 <strong>		¿Se encuentra en situación de peligro? ¿Necesita ayuda? En SSAC brindamos </strong>
						 <strong>		servicios de auxilio.</strong> 
						 <strong>		Ingrese sus datos en el siguiente formulario y le derivaremos a un rescatista </strong>
						 <strong>		lo antes posible.</strong>
						 
					
					
	<div class="ui-grid ui-grid-responsive">
    <div class="ui-grid-row">
     <div class="ui-grid-col-1"></div>
        <div class="ui-grid-col-5">
        <f:view>
		<h:form id="pedidoAyudaBean" >
			<h:messages id="messages" for="pedidoAyudaBean"></h:messages>
			<p:growl id="growl" showDetail="true" sticky="true" life="3000" />
			<h:panelGrid>	
			<p>
				<label for="catastrofeId">Catastrofe :</label>				
					<p:inputText id="catastrofeId" label="catastrofeId"  value="#{pedidoAyudaBean.catastrofe}" required="true" requiredMessage="La ong es requerida" >	
					</p:inputText>																																									
				</p>
				<p>
				<label for="descripcion">Descripcion :</label>				
					<p:inputTextarea rows="6" cols="33" id="descripcion" label="descripcion"  value="#{pedidoAyudaBean.descripcion}" required="true" requiredMessage="La ong es requerida" >	
					</p:inputTextarea>																																									
				</p>
				<p>
				<label for="coordenadasX">Latitud es:</label>				
					<p:inputText id="coordenadasX" label="coordenadasX" value="#{pedidoAyudaBean.coordenadasX}" required="true" requiredMessage="El usuario es requerido" >	
					</p:inputText>																																									
				</p>
				<label for="coordenadasY">Longitud es:</label>				
					<p:inputText id="coordenadasY" label="coordenadasY" value="#{pedidoAyudaBean.coordenadasY}" required="true" requiredMessage="El usuario es requerido" >	
					</p:inputText>	
				</h:panelGrid>	
			<p:commandButton id="registrarpedido" update="growl"  type="submit" style="margin-left: 150px;" Class="button" value="Ayuda" action="#{pedidoAyudaBean.registrarpedidoAyuda()}">
			</p:commandButton>	
		</h:form>
		</f:view>
        
        </div>
        <div class="ui-grid-col-1"></div>
        <div class="ui-grid-col-5"> 
        <br/>
        	<div id="map-canvas"></div>
        </div>
        <div class="ui-grid-col-1"></div>
    </div>
</div>
</div>
	</div>
		 

		<!-- DONACIONES -->	
<div class="oculto" id="donacion">	
<div class="wrapper style2">

			
		<h2><a href="#donacion"> Ayudanos a ayudar ¡Realice donaciones!</a></h2>
									<p>
									 Seleccione el tipo de donación que desea realizar.
									</p>
		
		
	<div class="ui-grid" id="donacionds">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">	
   		  
	 <h:panelGrid columns="1" cellpadding="5">
    <p:commandButton value="DE SERVICIOS" type="button" onclick="PF('dlg1').show();" /> 
</h:panelGrid>
<p:dialog header="DE SERVICIOS" widgetVar="dlg1" showEffect="explode" hideEffect="explode" height="500" width="400">
		   <f:view>
            <h:form id="deServicioBean">   
                <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
               <img src="images/servicio.jpg" alt="" />
                   <h:panelGrid>
                    <p> 
						<label for="idOng">ONG A DONAR</label>				
						<p:inputText id="idOng" label="idOng"  value="#{deServicioBean.idOng}" required="true" requiredMessage="El nombre de la ong es requerido" >	
						</p:inputText>																																									
					</p>
					   <p>
						<label for="usuario">NOMBRE :</label>				
						<p:inputText id="usuario" label="usuario"  value="#{deServicioBean.usuario}" required="true" requiredMessage="El nombre del usuario es requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<label for="fechaRealizada"> FECHA :</label>					
						<p:calendar id="fechaRealizada" label="fechaRealizada"  value="#{deServicioBean.fechaRealizada}" pattern="dd-MM-yyyy" mask="true" />																																							
					</p>
                     <p>
						<label for="areaConocimient">AREA DE CONOCIMIENTO :</label>				
						<p:inputText id="areaConocimient" label="areaConocimient"  value="#{deServicioBean.areaConocimient}" required="true" requiredMessage="El area es requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<label for="cantidadHoras">CANTIDAD DE HORAS :</label>				
						<p:inputText id="cantidadHoras" label="cantidadHoras"  value="#{deServicioBean.cantidadHoras}" required="true" requiredMessage="Cantidad de horas es requerido" >	
						</p:inputText>																																									
					</p>
					
                        <p:commandButton id="registro" update="growl" type="submit" Class="button" value="DONAR" action="#{deServicioBean.registrarDonacionDeServicio()}">
			</p:commandButton>	
                    </h:panelGrid>
            </h:form>
            </f:view>
</p:dialog>
            </div>	
            </div>	
            </div>	


  <!-- ECONOMICA -->
  
  <div class="ui-grid">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">
  <h:panelGrid columns="1" cellpadding="5">
    <p:commandButton value="ECONOMICA" type="button" onclick="PF('dlg2').show();" /> 
</h:panelGrid>
<p:dialog header="ECONOMICA" widgetVar="dlg2" showEffect="explode" hideEffect="explode" height="500" width="400">
		   <f:view>
            <h:form id="economicaBean">   
                <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
                <img src="images/visa.jpg" alt="" />
                  <h:panelGrid>		
				<p> ECONOMICA
				<label for="ong">ONG A DONAR:</label>				
					<p:inputText id="ong" label="ong"  value="#{economicaBean.ong}" required="true" requiredMessage="La ong es requerida" >	
					</p:inputText>																																									
				</p>
				<p>
				<label for="usuario">NOMBRE:</label>				
					<p:inputText id="usuario" label="usuario" value="#{economicaBean.usuario}" required="false" requiredMessage="El usuario es requerido" >	
					</p:inputText>																																									
				</p>
					<label for="fechaRealizada"> FECHA:</label>
        		<p:calendar id="fechaRealizada" value="#{economicaBean.fechaRealizada}" pattern="dd-MM-yyyy" mask="true" />
				
			<p:commandButton id="registrarDonacion" update="growl"  type="submit"  Class="button" value="Confirmar datos" action="#{economicaBean.registrarDonacionEconomica()}">
			</p:commandButton>	
			</h:panelGrid>	
            </h:form>
            </f:view>
            
 <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_donations"></input>
<input type="hidden" name="business" value="ongDonacion@gmail.com"></input>
<input type="hidden" name="lc" value="AL"></input>
<input type="hidden" name="item_name" value="ONG"></input>
<input type="hidden" name="no_note" value="0"></input>
<input type="hidden" name="currency_code" value="USD"></input>
<input type="hidden" name="bn" value="PP-DonationsBF:btn_donateCC_LG.gif:NonHostedGuest"></input>
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"></input>
<img alt="" border="0" src="https://www.paypalobjects.com/es_XC/i/scr/pixel.gif" width="1" height="1"></img>
</form>
</p:dialog>
</div>	
 </div>	
 </div>

<!-- DE BIENES -->
			
<div class="ui-grid">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">	
<h:panelGrid columns="1" cellpadding="5">
    <p:commandButton value="DE BIENES" type="button" onclick="PF('dlg3').show();" /> 
</h:panelGrid>
<p:dialog header="DE BIENES" widgetVar="dlg3" showEffect="explode" hideEffect="explode" height="500" width="400">
 
		   <f:view>
            <h:form id="deBienesBean">   
                <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
                  <img src="images/fru1.jpg" alt="" />
                    <h:panelGrid>
                       <p> 
						<label for="idOng">ONG A DONAR</label>				
						<p:inputText id="idOng" label="idOng"  value="#{deBienesBean.idOng}" required="true" requiredMessage="El nombre de la ong es requerido" >	
						</p:inputText>																																									
					</p>
					   <p>
						<label for="usuario">Usuario :</label>				
						<p:inputText id="usuario" label="usuario"  value="#{deBienesBean.usuario}" required="true" requiredMessage="El nombre del usuario es requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<p:outputLabel for="fechaRealizada" value="fechaRealizada" />					
						<p:calendar id="fechaRealizada" label="fechaRealizada"  value="#{deBienesBean.fechaRealizada}" pattern="dd-MM-yyyy" mask="true" />																																							
					</p>
                     <p>
						<label for="nombreItem">Elemento a donar :</label>				
						<p:inputText id="nombreItem" label="nombreItem"  value="#{deBienesBean.nombreItem}" required="true" requiredMessage="El nombre del elemento requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<label for="cantidad">cantidad :</label>				
						<p:inputText id="cantidad" label="cantidad"  value="#{deBienesBean.cantidad}" required="true" requiredMessage="La cantidad es requerida" >	
						</p:inputText>																																									
					</p>
		<p:commandButton id="registro" update="growl" type="submit" Class="button" value="DONAR" action="#{deBienesBean.registrarDonacionDeBienes()}">
			</p:commandButton>	
					</h:panelGrid>
            </h:form>
            </f:view>
</p:dialog>
		</div>	
        </div>	
        </div>	
			
	</div>		
</div>	
					
	<!-- ALTA DE PERSONAS DESAPARECIDAS -->
<div class ="oculto" id="personasdesap">
<div class="ui-grid">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">
		   <f:view>
	
		<h:form id="personasdesaparecidasBean" >
			 <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
                  <h:panelGrid>		
                    <p>PERSONAS DESAPARECIDAS
						<label for="catastrofeId"> CATASTROFE:</label>				
						<p:inputText id="catastrofeId" label="catastrofeId"  value="#{personasdesaparecidasBean.catastrofeId}" required="true" requiredMessage="El nombre es requerido" >	
						</p:inputText>																																									
					</p>  
			<p>
						<label for="nombre"> NOMBRE:</label>				
						<p:inputText id="nombre" label="nombre"  value="#{personasdesaparecidasBean.nombre}" required="true" requiredMessage="El nombre es requerido" >	
						</p:inputText>																																									
					</p>
					
					   <p>
						<label for="usuario">APELLIDO :</label>				
						<p:inputText id="apellido" label="apellido"  value="#{personasdesaparecidasBean.apellido}" required="true" requiredMessage="es requerido" >	
						</p:inputText>																																									
					</p>
					
					
                     <p>
						<label for="numeroContacto">NUMERO DE CONTACTO :</label>				
						<p:inputText id="numeroContacto" label="numeroContacto"  value="#{personasdesaparecidasBean.numeroContacto}" required="true" requiredMessage="es requerido" >	
						</p:inputText>																																									
					</p>
				<br/>
				<p>
						<label for="descripcion">DESCRIPCION :</label>				
						<p:inputText id="descripcion" label="descripcion"  value="#{personasdesaparecidasBean.descripcion}" required="true" requiredMessage="es requerido" >	
						</p:inputText>																																									
					</p>
					
					 <p>
						<p:outputLabel for="fechNac" value="FECHA NACIMIENTO" />					
						<p:calendar id="fechNac" label="fechNac"  value="#{personasdesaparecidasBean.fechNac}" pattern="dd-MM-yyyy" mask="true" />
																																														
					</p>
			  		
					<p>		
									
				</p>	
				<br/>
				
					           <p:commandButton id="registro"  update="growl"  type="submit"  Class="button" value="Registrar" action="#{personasdesaparecidasBean.registrarPersonasDesaparecidas()}">
				</p:commandButton>	 
				  
				    </h:panelGrid>      
               
              </h:form>
            </f:view>
            
            </div>	
            </div>	
            </div>	
   </div>
            
<!-- BUSCAR PERSONAS DESAPARECIDAS -->
<div class ="oculto" id="busperdesap">
<div class="ui-grid">
<div class="ui-grid-row">
<div class="ui-grid-col-1"></div>
<div class="ui-grid-col-11">
<h:form id="formPersona">      		
      		
      		<p:growl id="msgs" showDetail="true" />
      		BUSCAR PERSONAS
      		
    		<p:dataTable id="perDT" var="personaBean" widgetVar="personaTable" value = "#{listapersonaBean.personasBean}"
                 		 emptyMessage="No se han encontrado administrador con ese criterio"  filteredValue="#{listapersonaBean.filtroPersonafeBean}"               		  
                 		 paginator="true" rows="5" paginatorPosition="top"
                 		 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} "
                 		 selectionMode="single" selection="#{listapersonaBean.selectedPersona}"  rowKey="{personaBean.id}" dblClickSelect="true">    
                 		                                		                                           	                 	
				<f:facet name="header">
		            <p:outputPanel style="text-align: right">
		              
		                <p:inputText id="globalFilter"   onkeyup="PF('personaTable').filter()" style="width:300px" placeholder="Ingrese el nombre"/>		                
		            </p:outputPanel>
		        </f:facet>    	
		         <p:ajax event="rowSelect" listener="#{listapersonaBean.onRowSelect}" update=":formPersona:msgs" />
        		<p:ajax event="rowUnselect" listener="#{listapersonaBean.onRowUnselect}" update=":formPersona:msgs" />	        		        
		    
		        
        		<p:column headerText="Id" filterBy="#{personaBean.id}" filterMatchMode="contains" >
            		<h:outputText value="#{personaBean.id}" />
        		</p:column>             		                  		                  		             	
        		
        		<p:column headerText="Nombre"  filterBy="#{personaBean.nombre}" filterMatchMode="contains" >
            		<h:outputText value="#{personaBean.nombre}" />
        		</p:column>
        		
        		<p:column headerText="Apellido" filterBy="#{personaBean.apellido}" filterMatchMode="contains" >
            		<h:outputText value="#{personaBean.apellido}" />            		
        		</p:column>
        		
        		<p:column headerText="Contacto" filterBy="#{personaBean.numeroContacto}" filterMatchMode="contains">
            		<h:outputText value="#{personaBean.numeroContacto}" />            		
        		</p:column>
        		
        		        		
        		<p:column headerText="Descripcion" filterMatchMode="contains">
            		<h:outputText value="#{personaBean.descripcion}" />            		
        		</p:column>
        		
        		<p:column headerText="Imagen" filterMatchMode="contains">
            		<h:graphicImage value="image/#{personaBean.imagenes}" />            		
        		</p:column>
        		
        		<p:column headerText="¿Hallada?" filterBy="#{personaBean.hallada}" filterMatchMode="contains">
            		<h:outputText value="#{personaBean.hallada}" />            		
        		</p:column>
                      		    <hr></hr>     		
     		</p:dataTable>     		  
     		<hr></hr>   		
    </h:form>
</div>
<div class="ui-grid-col-1"></div>
</div>
</div>
</div>

<!-- REGISTRO DE USUARIO -->
<div class="oculto" id="registrousuario">
<div class="ui-grid">
<div class="ui-grid-row">
<div class="ui-grid-col-2"></div>
<div class="ui-grid-col-8">

			<h2><a href="#"> REGISTRO DE USUARIO</a></h2>
			<p>
	 Por favor, ingrese los campos para registrarse a la catastrofe
	</p>
	 <f:view>
	 <p:growl id="growl" showDetail="true" sticky="true" life="2000" />
		<h:form id="login2" >
		<p:panelGrid columns="1" cellpadding="2">
                <p>
						<label for="catastrofeId"> cat:</label>				
						<p:inputText id="catastrofeId" label="catastrofeId"  value="#{loginBean.idCatastrofe}" required="true" requiredMessage="El nombre es requerido" >	
						</p:inputText>																																									
					</p>  
			<p>
						<label for="nick"> Nick:</label>				
						<p:inputText id="nick" label="nick"  value="#{loginBean.nick}" required="true" requiredMessage="El nick es requerido" >	
						</p:inputText>																																									
					</p>
					
					   <p>
						<label for="nombre">Nombre :</label>				
						<p:inputText id="nombre" label="nombre"  value="#{loginBean.nombre}" required="true" requiredMessage="El nombre es requerido" >	
						</p:inputText>																																									
					</p>
					
                     <p>
						<label for="email">E-mail :</label>				
						<p:inputText id="email" label="email"  value="#{loginBean.email}"  >	
						</p:inputText>																																									
					</p>
				<br/>
				<p>
						<label for="nombre"> Clave:</label>	
							<p:password value="#{loginBean.clave}" id="password" required="true"  label="password" />																	
					</p>
					 <p>
						<p:outputLabel for="fechNac" value="fechNac" />					
						<p:calendar id="fechNac" label="fechNac"  value="#{loginBean.fechaNacimiento}" pattern="dd-MM-yyyy" mask="true" />											
					</p>
				<br/>
				<p:commandButton id="registrarButton" value="Registrar" actionListener="#{loginBean.registro}" update=":growl"   oncomplete="manejarLogin(xhr, status, args)" />	 
				   </p:panelGrid>  
            </h:form>
            </f:view>
 	</div>
<div class="ui-grid-col-2"></div>
</div>
</div>	
</div>
 
 <!-- LOGIN -->
 <div class="oculto" id="loginusuario">
<div class="ui-grid">
<div class="ui-grid-row">
<div class="ui-grid-col-2"></div>
<div class="ui-grid-col-8">
		<p:growl id="mensajes" showDetail="true" life="2000" />
					<h:form id= "formularioIngreso1">
								 <p>
						<label for="catastrofeId1"> Catastrofe:</label>				
						<p:inputText id="catastrofeId1" label="catastrofeId1"  value="#{loginBean.idCatastrofe1}"  >	
						</p:inputText>																																									
					</p>  
								<p>
									<label for="nick1"> Nick:</label>				
									<p:inputText id="nick1" label="nick1"  value="#{loginBean.nick1}" required="true" requiredMessage="El nick es requerido" >	
									</p:inputText>	
								</p>
								<p>
									<label for="nombre"> Clave:</label>	
									<p:password value="#{loginBean.clave1}" id="password" required="true"  label="password1" />			
	
							    </p>
							    <p:commandButton id="loginButton" value="Login" actionListener="#{loginBean.login}" update=":mensajes"   oncomplete="manejarLogin(xhr, status, args)" />
            					</h:form>
								
							
							<div class="section">
	<p><div class="fb-login-button" data-max-rows="1" data-size="xlarge" data-show-faces="false" data-auto-logout-link="false"></div>
		</p>
	
							</div>
</div>
<div class="ui-grid-col-2"></div>
 </div>	
  </div>		
 </div>

 		
 		
		<!-- Este script es para el mapa -->
		
		
		<script>
    var map = null;
    var infoWindow = null;
     
    function openInfoWindow(marker) {
        var markerLatLng = marker.getPosition();
        document.getElementById('pedidoAyudaBean:coordenadasX').value = markerLatLng.lat();
        document.getElementById('pedidoAyudaBean:coordenadasY').value = markerLatLng.lng();
        infoWindow.setContent([
            '&lt;b&gt;La posicion del marcador es:&lt;/b&gt;&lt;br/&gt;',
             markerLatLng.lat(),
            ', ',
            markerLatLng.lng(),
           
        ].join(''));
        infoWindow.open(map, marker);
    }
     
    function initialize() {
    	var myLatlng = new google.maps.LatLng(-34.91197608949991,-56.15386951171877);
    		  var mapOptions = {
    		    zoom: 8,
    		    center: myLatlng,
    		  };
     
        map = new google.maps.Map(document.getElementById('map-canvas'),
        	      mapOptions);
     
        infoWindow = new google.maps.InfoWindow();
     
        var marker = new google.maps.Marker({
            position: myLatlng,
            draggable: true,
            map: map,
         
        });
     
        google.maps.event.addListener(marker, 'click', function(){
            openInfoWindow(marker);
        });
    }
     
    $(document).ready(function() {
        initialize();
    });
    </script>
    
    
   <!-- Este script es para el login -->
   
   <script>
  
		  function statusChangeCallback(response) {
		    console.log('statusChangeCallback');
		    console.log(response);
		   
		    if (response.status === 'connected') {
		      
		      testAPI();
		    } else if (response.status === 'not_authorized') {
		      
		      document.getElementById('status').innerHTML = 'Please log ' +
		        'into this app.';
		    } else {
		      
		      document.getElementById('status').innerHTML = 'Please log ' +
		        'into Facebook.';
		    }
		  }
		
		  function checkLoginState() {
		    FB.getLoginStatus(function(response) {
		      statusChangeCallback(response);
		    });
		  }
		
		  window.fbAsyncInit = function() {
		  FB.init({
		    appId      : '334952920040001',//esta es mi ide stephy
		    cookie     : true,  // enable cookies to allow the server to access 
		                        // the session
		    xfbml      : true,  // parse social plugins on this page
		    version    : 'v2.1' // use version 2.1
		  });
		
		  
		  FB.getLoginStatus(function(response) {
		    statusChangeCallback(response);
		  });
		
		  };
		
		  
		  (function(d, s, id) {
		    var js, fjs = d.getElementsByTagName(s)[0];
		    if (d.getElementById(id)) return;
		    js = d.createElement(s); js.id = id;
		    js.src = "//connect.facebook.net/en_US/sdk.js";
		    fjs.parentNode.insertBefore(js, fjs);
		  }(document, 'script', 'facebook-jssdk'));
		
		  function testAPI() {
		    console.log('Welcome!  Fetching your information.... ');
		    FB.api('/me', function(response) {
		      console.log('Successful login for: ' + response.name);
		      document.getElementById('status').innerHTML =
		        'Thanks for logging in, ' + response.name + '!' ;
		      
		    });
		  }
</script>

<script type="text/javascript">
  //<![CDATA[
  function manejarLogin(xhr, status, args) {
    if (!args.validationFailed && args.estaLogeado) {
      setTimeout(function() {
        window.location = args.view;
      }, 500);
    }
  }
//]]>
</script>


			
	    <!--Este script es el que obtiene el id de la catastrofe que se selecciono en la pag anterior y lo guarda en el input-->
		<script>
		  //alert(window.localStorage.getItem("IdCatastrofe"));
		  //var id = window.localStorage.getItem("IdCatastrofe");
		  //alert(window.localStorage.getItem("urlCSS"));
		  //document.getElementById("j_idt5:catastrofeId").value = id;
		</script>		

		
		<script src="js/onload.js"></script>

	</body>
</html>