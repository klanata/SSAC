<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
       xmlns:p="http://primefaces.org/ui"> 

<h:head>
		<title>SSAC</title>
		#{nombreCatastrofeUsuario}
		#{cssCatastrofeUsuario}
		#{idCatastrofeUsuario}
		#{logoCatastrofeUsuario}
		#{descripcionCatastrofeUsuario}	
		
			
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
		<meta name="keywords" content="" />
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/jquery.scrolly.min.js"></script>
		<script src="js/jquery.onvisible.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
    <link rel="stylesheet" href="css/2skel.css" />
			<link id="cssPrincipal" rel="stylesheet" href="css/2style.css" />
			<link rel="stylesheet" href="css/style-desktop.css" />
			<link rel="stylesheet" href="css/style-noscript.css" />
    <script>
		  //alert(window.localStorage.getItem("IdCatastrofe"));
		  var css = window.localStorage.getItem("urlCSS");
		  var cssFinal = "css/"+ css; 
		  //alert("Css final: "+cssFinal);
		  //alert(window.localStorage.getItem("urlCSS"));
		  //document.getElementById("j_idt5:catastrofeId").value = id;
		  function cambiarCSS() { 
				$("#cssPrincipal").attr("href",cssFinal);
				//alert("cambie el css");
				return false;
		  }
		  cambiarCSS();
			function obtenerNombre(){
				HttpServletRequest req = (HttpServletRequest) request;
				String urlStr = req.getRequestURL().toString().toLowerCase();
				
				alert(urlStr);
				
				

				}

		 
	</script>	
<style>
			#map-canvas {
		   display: block;
		   width: 100%;
		   height: 900px;
			}
		
		     #map-canvas{
		        height: 850px;
				width:100%;
		        margin: 0px;
		        padding: 0px
		      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    
    
			

		
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</h:head>
	<body class="homepage">
	
		<!-- Header -->
			<div id="header">
						
				<!-- Inner -->
					<div class="inner">
						<div id="header">
							<h1><a href="Index.xhtml" id="logo">SSAC</a></h1>
							<hr />		
							<center>¡Bienvenido al Sistema de Soporte ante Catástrofes!</center>
						</div>
						<div class="footer">
							<a href="#banner" class="button circled scrolly">¡AYUDA!</a>		
												
						</div>
					</div>
				
				<!-- Nav -->
					<div id="nav">
						<ul>
							<li><a href="index.html">Home</a></li>
							<li><a href="#donacion">DONACIONES</a></li>
							
							<li><a href="#banner">SOLICITAR AYUDA</a></li>
							<li><a href="#busperdesap">BUSCAR PERSONAS DESAPARECIDAS</a></li>
							<li><a href="#personasdesap">ALTA PERSONAS DESAPARECIDAS</a></li>
						</ul>
					</div>

			</div>
			
			
			<!-- Banner -->
			<div class="section" id="banner">
					<h2> <strong>¡SOLICITE AYUDA!</strong></h2>
					
						 <strong>		¿Se encuentra en situación de peligro? ¿Necesita ayuda? En SSAC brindamos </strong>
						 <strong>		servicios de auxilio.</strong> 
						 <strong>		Ingrese sus datos en el siguiente formulario y le derivaremos a un rescatista </strong>
						 <strong>		lo antes posible.</strong>
					
					
	<div class="ui-grid ui-grid-responsive">
    <div class="ui-grid-row">
     <div class="ui-grid-col-1"></div>
        <div class="ui-grid-col-5">
        <f:view>
		<h:form id="pedidoAyudaBean" >
			<h:messages id="messages" for="pedidoAyudaBean"></h:messages>
			<p:growl id="growl" showDetail="true" sticky="true" life="3000" />
			<h:panelGrid>	
			<p>
				<label for="catastrofeId">Catastrofe :</label>				
					<p:inputText id="catastrofeId" label="catastrofeId"  value="#{pedidoAyudaBean.catastrofe}" required="true" requiredMessage="La ong es requerida" >	
					</p:inputText>																																									
				</p>
				<p>
				<label for="descripcion">Descripcion :</label>				
					<p:inputTextarea rows="6" cols="33" id="descripcion" label="descripcion"  value="#{pedidoAyudaBean.descripcion}" required="true" requiredMessage="La ong es requerida" >	
					</p:inputTextarea>																																									
				</p>
				<p>
				<label for="coordenadasX">Latitud es:</label>				
					<p:inputText id="coordenadasX" label="coordenadasX" value="#{pedidoAyudaBean.coordenadasX}" required="true" requiredMessage="El usuario es requerido" >	
					</p:inputText>																																									
				</p>
				<label for="coordenadasY">Longitud es:</label>				
					<p:inputText id="coordenadasY" label="coordenadasY" value="#{pedidoAyudaBean.coordenadasY}" required="true" requiredMessage="El usuario es requerido" >	
					</p:inputText>	
				</h:panelGrid>	
			<p:commandButton id="registrarpedido" update="growl"  type="submit" style="margin-left: 150px;" Class="button" value="Ayuda" action="#{pedidoAyudaBean.registrarpedidoAyuda()}">
			</p:commandButton>	
		</h:form>
		</f:view>
        
        </div>
        <div class="ui-grid-col-1"></div>
        <div class="ui-grid-col-5"> 
        <br/>
        	<div id="map-canvas"></div>
        </div>
        <div class="ui-grid-col-1"></div>
    </div>
</div>
	
	</div>
		 
		 
 

		<!-- DONACIONES -->	
<div class="wrapper style2" id="donacion">	

			
		<h2><a href="#donacion"> Ayudanos a ayudar ¡Realice donaciones!</a></h2>
									<p>
									 Seleccione el tipo de donación que desea realizar.
									</p>
		
		
	<div class="ui-grid" id="donacionds">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">	
   		  
	 <h:panelGrid columns="1" cellpadding="5">
    <p:commandButton value="DE SERVICIOS" type="button" onclick="PF('dlg1').show();" /> 
</h:panelGrid>
<p:dialog header="DE SERVICIOS" widgetVar="dlg1" showEffect="explode" hideEffect="explode" height="500" width="400">
		   <f:view>
            <h:form id="deServicioBean">   
                <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
               <img src="images/servicio.jpg" alt="" />
                   <h:panelGrid>
                    <p> 
						<label for="idOng">ONG A DONAR</label>				
						<p:inputText id="idOng" label="idOng"  value="#{deServicioBean.idOng}" required="true" requiredMessage="El nombre de la ong es requerido" >	
						</p:inputText>																																									
					</p>
					   <p>
						<label for="usuario">NOMBRE :</label>				
						<p:inputText id="usuario" label="usuario"  value="#{deServicioBean.usuario}" required="true" requiredMessage="El nombre del usuario es requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<label for="fechaRealizada"> FECHA :</label>					
						<p:calendar id="fechaRealizada" label="fechaRealizada"  value="#{deServicioBean.fechaRealizada}" pattern="dd-MM-yyyy" mask="true" />																																							
					</p>
                     <p>
						<label for="areaConocimient">AREA DE CONOCIMIENTO :</label>				
						<p:inputText id="areaConocimient" label="areaConocimient"  value="#{deServicioBean.areaConocimient}" required="true" requiredMessage="El area es requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<label for="cantidadHoras">CANTIDAD DE HORAS :</label>				
						<p:inputText id="cantidadHoras" label="cantidadHoras"  value="#{deServicioBean.cantidadHoras}" required="true" requiredMessage="Cantidad de horas es requerido" >	
						</p:inputText>																																									
					</p>
					
                        <p:commandButton id="registro" update="growl" type="submit" Class="button" value="DONAR" action="#{deServicioBean.registrarDonacionDeServicio()}">
			</p:commandButton>	
                    </h:panelGrid>
            </h:form>
            </f:view>
</p:dialog>
            </div>	
            </div>	
            </div>	


  <!-- ECONOMICA -->
  
  <div class="ui-grid">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">
  <h:panelGrid columns="1" cellpadding="5">
    <p:commandButton value="ECONOMICA" type="button" onclick="PF('dlg2').show();" /> 
</h:panelGrid>
<p:dialog header="ECONOMICA" widgetVar="dlg2" showEffect="explode" hideEffect="explode" height="500" width="400">
		   <f:view>
            <h:form id="economicaBean">   
                <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
                <img src="images/visa.jpg" alt="" />
                  <h:panelGrid>		
				<p> ECONOMICA
				<label for="ong">ONG A DONAR:</label>				
					<p:inputText id="ong" label="ong"  value="#{economicaBean.ong}" required="true" requiredMessage="La ong es requerida" >	
					</p:inputText>																																									
				</p>
				<p>
				<label for="usuario">NOMBRE:</label>				
					<p:inputText id="usuario" label="usuario" value="#{economicaBean.usuario}" required="true" requiredMessage="El usuario es requerido" >	
					</p:inputText>																																									
				</p>
					<label for="fechaRealizada"> FECHA:</label>
        		<p:calendar id="fechaRealizada" value="#{economicaBean.fechaRealizada}" pattern="dd-MM-yyyy" mask="true" />
				
			<p:commandButton id="registrarDonacion" update="growl"  type="submit"  Class="button" value="DONAR" action="#{economicaBean.registrarDonacionEconomica()}">
			</p:commandButton>	
			</h:panelGrid>	
            </h:form>
            </f:view>
</p:dialog>
</div>	
 </div>	
 </div>

<!-- DE BIENES -->
			
<div class="ui-grid">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">	
<h:panelGrid columns="1" cellpadding="5">
    <p:commandButton value="DE BIENES" type="button" onclick="PF('dlg3').show();" /> 
</h:panelGrid>
<p:dialog header="DE BIENES" widgetVar="dlg3" showEffect="explode" hideEffect="explode" height="500" width="400">
 
		   <f:view>
            <h:form id="deBienesBean">   
                <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
                  <img src="images/fru1.jpg" alt="" />
                    <h:panelGrid>
                       <p> 
						<label for="idOng">ONG A DONAR</label>				
						<p:inputText id="idOng" label="idOng"  value="#{deBienesBean.idOng}" required="true" requiredMessage="El nombre de la ong es requerido" >	
						</p:inputText>																																									
					</p>
					
					   <p>
						<label for="usuario">Usuario :</label>				
						<p:inputText id="usuario" label="usuario"  value="#{deBienesBean.usuario}" required="true" requiredMessage="El nombre del usuario es requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<p:outputLabel for="fechaRealizada" value="fechaRealizada" />					
						<p:calendar id="fechaRealizada" label="fechaRealizada"  value="#{deBienesBean.fechaRealizada}" pattern="dd-MM-yyyy" mask="true" />																																							
					</p>
                     <p>
						<label for="nombreItem">nombreItem :</label>				
						<p:inputText id="nombreItem" label="nombreItem"  value="#{deBienesBean.nombreItem}" required="true" requiredMessage="El nombre del Administrador es requerido" >	
						</p:inputText>																																									
					</p>
                     <p>
						<label for="cantidad">cantidad :</label>				
						<p:inputText id="cantidad" label="cantidad"  value="#{deBienesBean.cantidad}" required="true" requiredMessage="El nombre del Administrador es requerido" >	
						</p:inputText>																																									
					</p>
		<p:commandButton id="registro" update="growl" type="submit" Class="button" value="DONAR" action="#{deBienesBean.registrarDonacionDeBienes()}">
			</p:commandButton>	
					</h:panelGrid>
            </h:form>
            </f:view>
</p:dialog>
		</div>	
        </div>	
        </div>	
			
	</div>			
				
					
					
					
					
					
					
	<!-- ALTA DE PERSONAS DESAPARECIDAS -->
	
<div class="ui-grid" id="personasdesap">
   		 <div class="ui-grid-row">	
   		 <div class="ui-grid-col-1"></div>	
   		  <div class="ui-grid-col-6">
		   <f:view>
	
		<h:form id="personasdesaparecidasBean" >
			 <p:growl id="growl" showDetail="true" sticky="true" life="3000" />
                  <h:panelGrid>		
                    <hr></hr>
                <p>PERSONAS DESAPARECIDAS
						<label for="catastrofeId"> CATASTROFE:</label>				
						<p:inputText id="catastrofeId" label="catastrofeId"  value="#{personasdesaparecidasBean.catastrofeId}" required="true" requiredMessage="El nombre es requerido" >	
						</p:inputText>																																									
					</p>  
			<p>
						<label for="nombre"> NOMBRE:</label>				
						<p:inputText id="nombre" label="nombre"  value="#{personasdesaparecidasBean.nombre}" required="true" requiredMessage="El nombre es requerido" >	
						</p:inputText>																																									
					</p>
					
					   <p>
						<label for="usuario">APELLIDO :</label>				
						<p:inputText id="apellido" label="apellido"  value="#{personasdesaparecidasBean.apellido}" required="true" requiredMessage="es requerido" >	
						</p:inputText>																																									
					</p>
					
					
                     <p>
						<label for="numeroContacto">NUMERO DE CONTACTO :</label>				
						<p:inputText id="numeroContacto" label="numeroContacto"  value="#{personasdesaparecidasBean.numeroContacto}" required="true" requiredMessage="es requerido" >	
						</p:inputText>																																									
					</p>
				<br/>
				<p>
						<label for="descripcion">DESCRIPCION :</label>				
						<p:inputText id="descripcion" label="descripcion"  value="#{personasdesaparecidasBean.descripcion}" required="true" requiredMessage="es requerido" >	
						</p:inputText>																																									
					</p>
					
					 <p>
						<p:outputLabel for="fechNac" value="FECHA NACIMIENTO" />					
						<p:calendar id="fechNac" label="fechNac"  value="#{personasdesaparecidasBean.fechNac}" pattern="dd-MM-yyyy" mask="true" />
																																														
					</p>
			  		
					<p>		
									
				</p>	
				<br/>
				
					           <p:commandButton id="registro"  update="growl"  type="submit"  Class="button" value="Registrar" action="#{personasdesaparecidasBean.registrarPersonasDesaparecidas()}">
				</p:commandButton>	 
				  
				    </h:panelGrid>      
               
              </h:form>
            </f:view>
            
            </div>	
            </div>	
            </div>
			
			<hr></hr>


<!-- BUSCAR PERSONAS DESAPARECIDAS -->
<div class="ui-grid" id="busperdesap">
<div class="ui-grid-row">
<div class="ui-grid-col-1"></div>
<div class="ui-grid-col-11">
<h:form id="formPersona">      		
      		
      		<p:growl id="msgs" showDetail="true" />
      		BUSCAR PERSONAS
      		
    		<p:dataTable id="perDT" var="personaBean" widgetVar="personaTable" value = "#{listapersonaBean.personasBean}"
                 		 emptyMessage="No se han encontrado administrador con ese criterio"  filteredValue="#{listapersonaBean.filtroPersonafeBean}"               		  
                 		 paginator="true" rows="5" paginatorPosition="top"
                 		 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} "
                 		 selectionMode="single" selection="#{listapersonaBean.selectedPersona}"  rowKey="{personaBean.id}" dblClickSelect="true">    
                 		                                		                                           	                 	
				<f:facet name="header">
		            <p:outputPanel style="text-align: right">
		              
		                <p:inputText id="globalFilter"   onkeyup="PF('personaTable').filter()" style="width:300px" placeholder="Ingrese el nombre"/>		                
		            </p:outputPanel>
		        </f:facet>    	
		         <p:ajax event="rowSelect" listener="#{listapersonaBean.onRowSelect}" update=":formPersona:msgs" />
        		<p:ajax event="rowUnselect" listener="#{listapersonaBean.onRowUnselect}" update=":formPersona:msgs" />	        		        
		    
		        
        		<p:column headerText="Id" filterBy="#{personaBean.id}" filterMatchMode="contains" >
            		<h:outputText value="#{personaBean.id}" />
        		</p:column>             		                  		                  		             	
        		
        		<p:column headerText="Nombre"  filterBy="#{personaBean.nombre}" filterMatchMode="contains" >
            		<h:outputText value="#{personaBean.nombre}" />
        		</p:column>
        		
        		<p:column headerText="Apellido" filterBy="#{personaBean.apellido}" filterMatchMode="contains" >
            		<h:outputText value="#{personaBean.apellido}" />            		
        		</p:column>
        		
        		<p:column headerText="Contacto" filterBy="#{personaBean.numeroContacto}" filterMatchMode="contains">
            		<h:outputText value="#{personaBean.numeroContacto}" />            		
        		</p:column>
        		
        		        		
        		<p:column headerText="Descripcion" filterMatchMode="contains">
            		<h:outputText value="#{personaBean.descripcion}" />            		
        		</p:column>
        		
        		<p:column headerText="Imagen" filterMatchMode="contains">
            		<h:graphicImage value="image/#{personaBean.imagenes}" />            		
        		</p:column>
        		
        		<p:column headerText="¿Hallada?" filterBy="#{personaBean.hallada}" filterMatchMode="contains">
            		<h:outputText value="#{personaBean.hallada}" />            		
        		</p:column>
                      		    <hr></hr>     		
     		</p:dataTable>     		  
     		<hr></hr>   		
    </h:form>
</div>
<div class="ui-grid-col-1"></div>
</div>
</div>
					

			

			
		<!-- Este script es para el mapa -->
		
		
		<script>
    var map = null;
    var infoWindow = null;
     
    function openInfoWindow(marker) {
        var markerLatLng = marker.getPosition();
        document.getElementById('pedidoAyudaBean:coordenadasX').value = markerLatLng.lat();
        document.getElementById('pedidoAyudaBean:coordenadasY').value = markerLatLng.lng();
        infoWindow.setContent([
            '&lt;b&gt;La posicion del marcador es:&lt;/b&gt;&lt;br/&gt;',
             markerLatLng.lat(),
            ', ',
            markerLatLng.lng(),
           
        ].join(''));
        infoWindow.open(map, marker);
    }
     
    function initialize() {
    	var myLatlng = new google.maps.LatLng(-34.91197608949991,-56.15386951171877);
    		  var mapOptions = {
    		    zoom: 8,
    		    center: myLatlng,
    		  };
     
        map = new google.maps.Map(document.getElementById('map-canvas'),
        	      mapOptions);
     
        infoWindow = new google.maps.InfoWindow();
     
        var marker = new google.maps.Marker({
            position: myLatlng,
            draggable: true,
            map: map,
         
        });
     
        google.maps.event.addListener(marker, 'click', function(){
            openInfoWindow(marker);
        });
    }
     
    $(document).ready(function() {
        initialize();
    });
    </script>
			
	    <!--Este script es el que obtiene el id de la catastrofe que se selecciono en la pag anterior y lo guarda en el input-->
		<script>
		  //alert(window.localStorage.getItem("IdCatastrofe"));
		  //var id = window.localStorage.getItem("IdCatastrofe");
		  //alert(window.localStorage.getItem("urlCSS"));
		  //document.getElementById("j_idt5:catastrofeId").value = id;
		</script>		

		
		<script src="js/onload.js"></script>

	</body>
</html>